@model CMS.Mcp.Client.Contracts.Models.ErrorViewModel
@{
    ViewData["Title"] = "Error";
}

<div class="error-container text-center">
    <div class="error-card">
        <div class="error-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h1 class="error-title">Oops! Something went wrong.</h1>
        <div class="error-details">
            <p class="error-message">An error occurred while processing your request.</p>
            
            @if (Model.ShowRequestId)
            {
                <div class="request-id-container">
                    <p><strong>Request ID:</strong> <code>@Model.RequestId</code></p>
                </div>
            }
            
            @if (Context.Request.Cookies["IsAdmin"] == "true" || 
                 Context.Request.Cookies["IsDeveloper"] == "true" || 
                 Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development")
            {
                <div class="dev-info mt-4">
                    <h4><i class="fas fa-code me-2"></i>Development Information</h4>
                    <div class="dev-details">
                        <p>
                            More detailed error information is available in Development mode.
                        </p>
                        @if (Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") != "Development")
                        {
                            <p class="small text-muted">
                                For local debugging, enable the Development environment by setting the 
                                ASPNETCORE_ENVIRONMENT variable to "Development" and restart the application.
                            </p>
                        }
                    </div>
                </div>
            }
        </div>
        <div class="error-actions">
            <a href="@Url.Action("Index", "Chat")" class="btn btn-primary">
                <i class="fas fa-home me-2"></i> Go to Home
            </a>
            <button onclick="window.history.back();" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i> Go Back
            </button>
        </div>
    </div>
</div>

<style>
    #spinnerContainer {
        display: none !important;
    }

    .error-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: calc(100vh - 100px);
        padding: 2rem;
    }

    .error-card {
        max-width: 600px;
        background-color: white;
        border-radius: 12px;
        padding: 2.5rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--light-blue, #d0d7de);
    }

    .error-icon {
        font-size: 5rem;
        color: #ff6b6b;
        margin-bottom: 1.5rem;
    }

    .error-title {
        color: var(--dark-blue, #0d47a1);
        margin-bottom: 1.5rem;
        font-weight: 600;
    }

    .error-message {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        color: #555;
    }

    .error-details {
        margin-bottom: 2rem;
        color: #777;
    }

    .dev-info {
        text-align: left;
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 6px;
        margin-top: 1rem;
        border: 1px solid #e9ecef;
    }

    .dev-info h4 {
        color: var(--primary-blue, #0078d4);
        margin-bottom: 0.75rem;
        font-size: 1.1rem;
    }

    .request-id-container {
        background-color: #f0f4f8;
        padding: 0.75rem;
        border-radius: 6px;
        display: inline-block;
    }

    .request-id-container code {
        background-color: rgba(0, 0, 0, 0.05);
        padding: 0.2rem 0.4rem;
        border-radius: 3px;
        font-family: monospace;
    }

    .error-actions {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 2rem;
    }

    .error-actions .btn {
        padding: 0.75rem 1.5rem;
        font-weight: 500;
    }

    @@media (max-width: 768px) {
        .error-card {
            padding: 1.5rem;
        }
        
        .error-icon {
            font-size: 4rem;
        }
        
        .error-title {
            font-size: 1.8rem;
        }
        
        .error-actions {
            flex-direction: column;
        }
        
        .error-actions .btn {
            width: 100%;
            margin-bottom: 0.5rem;
        }
    }
</style>
